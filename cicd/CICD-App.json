{"status":{},"spec":{"description":"","resources":{"client_attrs":{"02eb0f42_deployment":{"y":607,"x":1194.75},"None":{"y":159,"x":524.5},"c4a7ebbf_deployment":{"y":460,"x":965.75},"NodeJS":{"y":420,"x":940},"Nginx":{"y":640,"x":1240},"MongoDB":{"y":200,"x":660},"f8416720_deployment":{"y":313,"x":744.75}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Epoch Registration"}],"name":"1e24c412_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Epoch Registration","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"c2dcabc6_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"9973e402_runbook","main_task_local_reference":{"kind":"app_task","name":"1e24c412_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"208e0c06_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"9b9b7baa_runbook","main_task_local_reference":{"kind":"app_task","name":"208e0c06_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9a1df277_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"fee50ad4_runbook","main_task_local_reference":{"kind":"app_task","name":"9a1df277_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"191f8ebb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"aa2452ba_runbook","main_task_local_reference":{"kind":"app_task","name":"191f8ebb_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"6a3ec2fa_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"29e96d1d_runbook","main_task_local_reference":{"kind":"app_task","name":"6a3ec2fa_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Load Data"}],"name":"09a00c23_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Load Data","attrs":{"exit_status":[],"script":"wget http:\/\/@@{artifactory_ip}@@:8081\/artifactory\/@@{project_name}@@-local-repo\/@@{project_name}@@@@{build_number}@@\/db.tar.gz \ntar xvfz db.tar.gz\nmongo demodb < collections.json\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"ef6b3a3e_runbook","main_task_local_reference":{"kind":"app_task","name":"09a00c23_dag"},"variable_list":[]},"name":"MongoDB Load"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install MongoDB"}],"name":"d6bf3393_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install MongoDB","attrs":{"exit_status":[],"script":"echo \"Updating Ubuntu Repositories\"\nsudo apt-key adv --keyserver hkp:\/\/keyserver.ubuntu.com:80 --recv EA312927\n\necho \"deb http:\/\/repo.mongodb.org\/apt\/ubuntu xenial\/mongodb-org\/3.2 multiverse\" | sudo tee \/etc\/apt\/sources.list.d\/mongodb-org-3.2.list\nsudo apt-get update\n\necho \"Install MongoDB\"\nsudo apt-get install -y mongodb-org\n\necho \"Update mongod.conf\"\necho \"# mongod.conf\nstorage:\n  dbPath: \/var\/lib\/mongodb\n  journal:\n    enabled: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: \/var\/log\/mongodb\/mongod.log\n\nnet:\n  port: 27017\n  bindIp: 0.0.0.0\" | sudo tee \/etc\/mongod.conf\n\necho \"Start MongoDB Service\"\nsudo systemctl restart mongod\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"5d61bb96_runbook","main_task_local_reference":{"kind":"app_task","name":"d6bf3393_dag"},"variable_list":[]},"name":"MongoDB Installation"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Register with Epoch"},{"kind":"app_task","name":"Install MongoDB Collector Service"}],"name":"bcf7d11f_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Register with Epoch"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Install MongoDB Collector Service"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register with Epoch","attrs":{"exit_status":[],"script":"set -x \n\nping -c 10 @@{epoch_aoc_host}@@\n\nsudo wget --no-check-certificate --header=\"userport: 443\" \\\n     -O \/usr\/bin\/install-epoch-collectors.sh https:\/\/@@{epoch_aoc_host}@@\/install_epoch_collectors\nsudo chmod +x \/usr\/bin\/install-epoch-collectors.sh \\\n     && EPOCH_ANALYSIS_DEPTH=layer7 EPOCH_AOC_HOST=@@{epoch_aoc_host}@@ EPOCH_ORGANIZATION_ID=@@{epoch_org_id}@@ EPOCH_ANALYSIS_DEPTH=layer4 EPOCH_AUTOUPGRADE_COLLECTORS=no EPOCH_PKG_REPO_PORT=@@{download_port}@@ EPOCH_PKG_REPO_HOST=@@{download_host}@@ \/usr\/bin\/install-epoch-collectors.sh\nsudo \/etc\/init.d\/epoch-collectors restart","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install MongoDB Collector Service","attrs":{"exit_status":[],"script":"echo \"Install MongoDB Collector\"\necho \"init_config:\n\ninstances:\n  - server: mongodb:\/\/localhost:27017\/demodb\n    additional_metrics:\n      - metrics.commands\n      - tcmalloc\n      - top\n      - collection\n    collections:\n      - peaks\" | sudo tee \/etc\/nutanix\/epoch-dd-agent\/conf.d\/mongo.yaml\n    \nsudo \/etc\/init.d\/epoch-collectors stop\nsudo EPOCH_ANALYSIS_DEPTH=layer7 \/opt\/nutanix\/epoch\/collectors\/configure.sh\nsudo \/etc\/init.d\/epoch-collectors restart\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"c2dcabc6_runbook","main_task_local_reference":{"kind":"app_task","name":"bcf7d11f_dag"},"variable_list":[]},"name":"Epoch Registration"}],"depends_on_list":[],"name":"MongoDB","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"NodeJS Configuration"},{"kind":"app_task","name":"Epoch Registration"}],"name":"bef1e0ff_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"NodeJS Configuration"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Epoch Registration"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"NodeJS Configuration","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"8b136b3d_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Epoch Registration","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"0ac8fecf_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"9ce2bb44_runbook","main_task_local_reference":{"kind":"app_task","name":"bef1e0ff_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"b21de10f_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"facec687_runbook","main_task_local_reference":{"kind":"app_task","name":"b21de10f_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Restart NodeJS"}],"name":"21769bcf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Restart NodeJS","attrs":{"exit_status":[],"script":"echo \"Restart Node.js\"\nsudo systemctl restart nodejsapp\n\n#echo \"Check Status of Node.js\"\n#sudo systemctl status nodejsapp\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"607577d2_runbook","main_task_local_reference":{"kind":"app_task","name":"21769bcf_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"62ddf398_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ef5f81d2_runbook","main_task_local_reference":{"kind":"app_task","name":"62ddf398_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"83048315_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c004209e_runbook","main_task_local_reference":{"kind":"app_task","name":"83048315_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Configure NodeJS"}],"name":"b38e7868_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Configure NodeJS","attrs":{"exit_status":[],"script":"sudo mkdir -p \/var\/www\/html\/\n\necho '#!\/bin\/bash\nexport MONGODB_HOST='@@{MongoDB.address}@@'\n\/usr\/bin\/nodejs \/var\/www\/html\/app.js' | sudo tee \/var\/www\/html\/runnode.sh\n\nsudo chmod 700 \/var\/www\/html\/runnode.sh\n\necho '[Unit]\nDescription=NodeJs app\n\n[Service]\nExecStart=\/var\/www\/html\/runnode.sh\nRestart=always\nUser=root\nGroup=root\nEnvironment=PATH=\/usr\/bin:\/usr\/local\/bin\nEnvironment=NODE_ENV=production\nWorkingDirectory=\/var\/www\/html\n\n[Install]\nWantedBy=multi-user.target' | sudo tee \/etc\/systemd\/system\/nodejsapp.service\n\ncd \/var\/www\/html\/\nsudo wget http:\/\/@@{artifactory_ip}@@:8081\/artifactory\/@@{project_name}@@-local-repo\/@@{project_name}@@@@{build_number}@@\/nodejs-app.tar.gz\nsudo tar xvfz nodejs-app.tar.gz\n\nsudo systemctl start nodejsapp\nsudo systemctl enable nodejsapp\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"8b136b3d_runbook","main_task_local_reference":{"kind":"app_task","name":"b38e7868_dag"},"variable_list":[]},"name":"NodeJS Configuration"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install NodeJS"}],"name":"350f4067_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install NodeJS","attrs":{"script":"echo \"Update Local Repositories\"\ncurl -sL https:\/\/deb.nodesource.com\/setup_8.x -o nodesource_setup.sh\nsudo bash nodesource_setup.sh\nsudo apt-get update\n\necho \"Install Node.js\"\nsudo apt-get install -y nodejs\n\necho \"Check Version\"\nnodejs -v","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"2462adfe_runbook","main_task_local_reference":{"kind":"app_task","name":"350f4067_dag"},"variable_list":[]},"name":"NodeJS Installation"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install NPM"}],"name":"55f3b084_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install NPM","attrs":{"exit_status":[],"script":"echo \"Update Local Repositories\"\nsudo apt-get update\n\necho \"Install NPM\"\nsudo apt-get install npm -y\n\necho \"Check Version\"\nnpm -v","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"ace70036_runbook","main_task_local_reference":{"kind":"app_task","name":"55f3b084_dag"},"variable_list":[]},"name":"NPM Installation"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Register with Epoch"},{"kind":"app_task","name":"Install NodeJS Collector Service"}],"name":"6a3170db_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Register with Epoch"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Install NodeJS Collector Service"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register with Epoch","attrs":{"exit_status":[],"script":"set -x \n\nping -c 10 @@{epoch_aoc_host}@@\n\nsudo wget --no-check-certificate --header=\"userport: 443\" \\\n     -O \/usr\/bin\/install-epoch-collectors.sh https:\/\/@@{epoch_aoc_host}@@\/install_epoch_collectors\nsudo chmod +x \/usr\/bin\/install-epoch-collectors.sh \\\n     && EPOCH_ANALYSIS_DEPTH=layer7 EPOCH_AOC_HOST=@@{epoch_aoc_host}@@ EPOCH_ORGANIZATION_ID=@@{epoch_org_id}@@ EPOCH_ANALYSIS_DEPTH=layer4 EPOCH_AUTOUPGRADE_COLLECTORS=no EPOCH_PKG_REPO_PORT=@@{download_port}@@ EPOCH_PKG_REPO_HOST=@@{download_host}@@ \/usr\/bin\/install-epoch-collectors.sh\nsudo \/etc\/init.d\/epoch-collectors restart","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install NodeJS Collector Service","attrs":{"exit_status":[],"script":"echo \"Install Http-Check Collector\"\necho \"init_config:\ninstances:\n  - name: NodeJS API\n    url: http:\/\/localhost:3000\/api\n    timeout: 1\" | sudo tee \/etc\/nutanix\/epoch-dd-agent\/conf.d\/http_check.yaml\n\nsudo \/etc\/init.d\/epoch-collectors stop\nsudo EPOCH_ANALYSIS_DEPTH=layer7 \/opt\/nutanix\/epoch\/collectors\/configure.sh\nsudo \/etc\/init.d\/epoch-collectors restart\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"0ac8fecf_runbook","main_task_local_reference":{"kind":"app_task","name":"6a3170db_dag"},"variable_list":[]},"name":"Epoch Registration"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install Mongo"}],"name":"464f8e38_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install Mongo","attrs":{"script":"echo \"Updating Ubuntu Repositories\"\nsudo apt-key adv --keyserver hkp:\/\/keyserver.ubuntu.com:80 --recv EA312927\n\necho \"deb http:\/\/repo.mongodb.org\/apt\/ubuntu xenial\/mongodb-org\/3.2 multiverse\" | sudo tee \/etc\/apt\/sources.list.d\/mongodb-org-3.2.list\nsudo apt-get update\n\necho \"Install MongoDB\"\nsudo apt-get install -y mongodb-org\n\necho \"Update mongod.conf\"\necho \"# mongod.conf\nstorage:\n  dbPath: \/var\/lib\/mongodb\n  journal:\n    enabled: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: \/var\/log\/mongodb\/mongod.log\n\nnet:\n  port: 27017\n  bindIp: 0.0.0.0\" | sudo tee \/etc\/mongod.conf\n\necho \"Start MongoDB Service\"\nsudo systemctl restart mongod\n","type":"","command_line_args":"","exit_status":[],"script_type":"sh"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"301fcf68_runbook","main_task_local_reference":{"kind":"app_task","name":"464f8e38_dag"},"variable_list":[]},"name":"Mongo Install for Testing"}],"depends_on_list":[{"kind":"app_service","name":"MongoDB"}],"name":"NodeJS","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Nginx Configuration"},{"kind":"app_task","name":"Epoch Registration"}],"name":"43c09141_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Nginx Configuration"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Epoch Registration"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Nginx Configuration","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"0f4c6180_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Epoch Registration","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"4418aa7f_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"a0af322b_runbook","main_task_local_reference":{"kind":"app_task","name":"43c09141_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"0c1509c6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"09067909_runbook","main_task_local_reference":{"kind":"app_task","name":"0c1509c6_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"a807ccbf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"8a33aaec_runbook","main_task_local_reference":{"kind":"app_task","name":"a807ccbf_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"dbf714ad_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"3a6afede_runbook","main_task_local_reference":{"kind":"app_task","name":"dbf714ad_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"064c4dc5_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"87aa8d05_runbook","main_task_local_reference":{"kind":"app_task","name":"064c4dc5_dag"},"variable_list":[]},"name":"action_restart"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install Nginx"}],"name":"5c719c23_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install Nginx","attrs":{"exit_status":[],"script":"sudo apt-get update\nsudo apt-get install nginx -y","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"ea95f24d_runbook","main_task_local_reference":{"kind":"app_task","name":"5c719c23_dag"},"variable_list":[]},"name":"Nginx Installation"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Configure Nginx"}],"name":"490b0157_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Configure Nginx","attrs":{"exit_status":[],"script":"cd \/var\/www\/html\nsudo rm index.nginx-debian.html\nsudo wget http:\/\/@@{artifactory_ip}@@:8081\/artifactory\/@@{project_name}@@-local-repo\/@@{project_name}@@@@{build_number}@@\/web.tar.gz\nsudo tar xvfz web.tar.gz\n\nsudo sed -i 's\/NODEJS_IP_ADDRESS\/'@@{NodeJS.address}@@'\/' \/var\/www\/html\/js\/data.js\nsudo sed -i 's\/WEB_IP_ADDRESS\/'`ip address show dev ens3 | grep \"inet\" | grep -v \"inet6\" | cut -d '\/' -f1 | cut -d ' ' -f6`'\/' \/var\/www\/html\/index.html\nsudo sed -i 's\/WEB_SERVER_NAME\/'`hostname`'\/' \/var\/www\/html\/index.html\n\nsudo chmod 644 index.html\nsudo chmod 755 css\/\nsudo chmod 755 js\/\nsudo chmod 755 images\/\nsudo chmod 644 css\/*\nsudo chmod 644 js\/*\nsudo chmod 644 images\/*","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"0f4c6180_runbook","main_task_local_reference":{"kind":"app_task","name":"490b0157_dag"},"variable_list":[]},"name":"Nginx Configuration"},{"description":"","type":"user","critical":false,"runbook":{"task_definition_list":[{"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Register with Epoch"},{"kind":"app_task","name":"Install Nginx Default SitesEnabled Config"},{"kind":"app_task","name":"Install Nginx Collectors for Epoch"}],"name":"a190c88d_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Register with Epoch"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Install Nginx Default SitesEnabled Config"}},{"from_task_reference":{"kind":"app_task","name":"Install Nginx Default SitesEnabled Config"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Install Nginx Collectors for Epoch"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Register with Epoch","attrs":{"exit_status":[],"script":"set -x \n\nping -c 10 @@{epoch_aoc_host}@@\n\nsudo wget --no-check-certificate --header=\"userport: 443\" \\\n     -O \/usr\/bin\/install-epoch-collectors.sh https:\/\/@@{epoch_aoc_host}@@\/install_epoch_collectors\nsudo chmod +x \/usr\/bin\/install-epoch-collectors.sh \\\n     && EPOCH_ANALYSIS_DEPTH=layer7 EPOCH_AOC_HOST=@@{epoch_aoc_host}@@ EPOCH_ORGANIZATION_ID=@@{epoch_org_id}@@ EPOCH_ANALYSIS_DEPTH=layer4 EPOCH_AUTOUPGRADE_COLLECTORS=no EPOCH_PKG_REPO_PORT=@@{download_port}@@ EPOCH_PKG_REPO_HOST=@@{download_host}@@ \/usr\/bin\/install-epoch-collectors.sh\nsudo \/etc\/init.d\/epoch-collectors restart","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install Nginx Default SitesEnabled Config","attrs":{"exit_status":[],"script":"echo \"Default Nginx Site-Enabled Config\"\necho 'server {\n\tlisten 80 default_server;\n\tlisten [::]:80 default_server;\n\n\troot \/var\/www\/html;\n\n\tindex index.html index.htm index.nginx-debian.html;\n\n\tserver_name _;\n\n\tlocation \/ {\n\t\ttry_files $uri $uri\/ =404;\n\t}\n\n    location \/nginx_status {\n        stub_status;\n    }\n}' | sudo tee \/etc\/nginx\/sites-enabled\/default\n\nsudo systemctl restart nginx","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install Nginx Collectors for Epoch","attrs":{"exit_status":[],"script":"echo \"Install Nginx Collector\"\necho \"init_config:\n\ninstances:\n  - nginx_status_url: http:\/\/localhost\/nginx_status\/\n\" | sudo tee \/etc\/nutanix\/epoch-dd-agent\/conf.d\/nginx.yaml\n  \necho \"Install Http-Check Collector\"\necho \"init_config:\ninstances:\n  - name: Nginx Web Page\n    url: http:\/\/localhost\n    timeout: 1\n  - name: Nodejs API\n    url: https:\/\/@@{NodeJS.address}@@:3000\/api\" | sudo tee \/etc\/nutanix\/epoch-dd-agent\/conf.d\/http_check.yaml\n    \nsudo \/etc\/init.d\/epoch-collectors stop\nsudo EPOCH_ANALYSIS_DEPTH=layer7 \/opt\/nutanix\/epoch\/collectors\/configure.sh\nsudo \/etc\/init.d\/epoch-collectors restart\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"4418aa7f_runbook","main_task_local_reference":{"kind":"app_task","name":"a190c88d_dag"},"variable_list":[]},"name":"Epoch Registration"}],"depends_on_list":[{"kind":"app_service","name":"NodeJS"}],"name":"Nginx","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"MongoDBVM","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"mongodb-vm-@@{calm_random}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"dd1a9fed-a931-48d4-9861-4ac102da2480"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":2048,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nfqdn: @@{name}@@.gso.lab\nmanage_etc_hosts: true\nhostname: @@{name}@@"},"type":"","sysprep":null},"power_state":"ON","type":"","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"ubu-template.qcow2","uuid":"586b044d-4123-4f11-8304-ac207d9972e7"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"NodeJSVM","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"nodejs-vm-@@{calm_random}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"dd1a9fed-a931-48d4-9861-4ac102da2480"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":2048,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nfqdn: @@{name}@@.gso.lab\nmanage_etc_hosts: true\nhostname: @@{name}@@"},"type":"","sysprep":null},"power_state":"ON","type":"","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"ubu-template.qcow2","uuid":"586b044d-4123-4f11-8304-ac207d9972e7"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"NginxVM","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"nginx-vm-@@{calm_random}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"dd1a9fed-a931-48d4-9861-4ac102da2480"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":2048,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nfqdn: @@{name}@@.gso.lab\nmanage_etc_hosts: true\nhostname: @@{name}@@"},"type":"","sysprep":null},"power_state":"ON","type":"","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"ubu-template.qcow2","uuid":"586b044d-4123-4f11-8304-ac207d9972e7"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"nutanix","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"Ubuntu Credential"},{"username":"admin","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"Prism Central User"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"MongoDB"}],"name":"MongoDBPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MongoDBPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"MongoDB Installation"},{"kind":"app_task","name":"MongoDB Load"}],"name":"a62ab18f_dag","state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"MongoDB Installation"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"MongoDB Load"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"MongoDB Installation","state":"ACTIVE","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"5d61bb96_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MongoDB"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"MongoDB Load","state":"ACTIVE","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"ef6b3a3e_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"ebfc1042_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"a62ab18f_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MongoDBPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"6f5d9a5a_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"d67184d7_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"6f5d9a5a_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"NodeJS"}],"name":"NodeJSPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"NodeJSPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"NodeJS Installation"},{"kind":"app_task","name":"NPM Installation"},{"kind":"app_task","name":"Mongo Install for Testing"}],"name":"8a5423be_dag","state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"NodeJS Installation"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"NPM Installation"}},{"from_task_reference":{"kind":"app_task","name":"NPM Installation"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Mongo Install for Testing"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"NodeJS Installation","state":"ACTIVE","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"2462adfe_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"NPM Installation","state":"ACTIVE","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"ace70036_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeJS"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Mongo Install for Testing","state":"ACTIVE","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"301fcf68_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"e7bb43e7_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"8a5423be_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"NodeJSPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"8f25d35a_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a3c0d4f4_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"8f25d35a_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Nginx"}],"name":"NginxPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"NginxPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Nginx Installation"}],"name":"77c6710d_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Nginx"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Nginx Installation","state":"ACTIVE","attrs":{"type":"CALL_RUNBOOK","inarg_list":[],"runbook_reference":{"kind":"app_runbook","name":"ea95f24d_runbook"}},"timeout_secs":"0","type":"CALL_RUNBOOK","variable_list":[]}],"description":"","name":"aa48ffba_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"77c6710d_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"NginxPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"01e202b8_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"e47f81a1_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"01e202b8_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"f8416720_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"MongoDBPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"MongoDBVM"},"min_replicas":"1","variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"c4a7ebbf_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"NodeJSPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"NodeJSVM"},"min_replicas":"1","variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"02eb0f42_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"NginxPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"NginxVM"},"min_replicas":"1","variable_list":[],"description":""}],"description":"","action_list":[],"name":"Default","variable_list":[{"val_type":"STRING","description":"","name":"artifactory_ip","type":"LOCAL","value":"10.139.81.252","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"pc_instance_ip","type":"LOCAL","value":"10.139.80.4","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"project_name","type":"LOCAL","value":"devops","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"build_number","type":"LOCAL","value":"1","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"epoch_aoc_host","type":"LOCAL","value":"nutanix.epoch.nutanix.com","label":""},{"val_type":"STRING","description":"","name":"epoch_org_id","type":"LOCAL","value":"8cb44812-1cd3-45c4-847d-43f3271d126f","label":""},{"val_type":"STRING","description":"","name":"download_host","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"download_port","type":"LOCAL","value":"","label":"","attrs":{"type":""}}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"Ubuntu Credential"},"type":"USER"},"name":"CICD-App2"},"api_version":"3.0","metadata":{"last_update_time":"1553228635067431","kind":"blueprint","spec_version":5,"creation_time":"1553211837287160","name":"CICD-App2"}}